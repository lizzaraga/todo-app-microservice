services:
  consult:
    container_name: consul
    image: hashicorp/consul
    ports:
      - "8500:8500"
    networks:
      - todo-network
  auth-service:
    container_name: auth-service
    build:
      context: ./AuthService
    volumes:
      - ./LocalDb:/app/LocalDb
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
    depends_on:
      - consult
    networks:
      - todo-network
  todo-service:
    container_name: todo-service
    build:
      context: ./TodoService
    volumes:
      - ./LocalDb:/app/LocalDb
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
    networks:
      - todo-network
    depends_on:
      - consult
  api-gateway:
    container_name: api-gateway
    build:
      context: ./ApiGateway
    ports:
      - 5000:8080
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
    networks:
      - todo-network
    depends_on:
      - auth-service
      - todo-service
    
networks:
  todo-network:
    driver: bridge
